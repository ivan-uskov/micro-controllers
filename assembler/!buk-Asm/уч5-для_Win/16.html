<html>
<head>
<title>Кнопки</title>
</head>
<BODY background="../../bgrwhite.gif">
<p><div align="center"><b><font size="+1" face="Arial">Кнопки </font></b></div></p>

<p>
Перед тем, как начать рассказ о кнопках, хочу предостеречь читателя. Дело в том, что можно
использовать кнопки и в обычных окнах. Но они, как и большинство элементов управления,
проектировались для использования именно в диалоговых окнах. Использование кнопок в обычных
окнах не рекомендуется, ибо это увеличивает риск того, что программа будет работать неправильно.
<p>
Кнопка - это имитация на экране обычной кнопки или переключателя. В этом разделе под кнопками
я также подразумеваю не только PushButons (обычные нажимаемые кнопки), но и Check Boxes (обычно
это небольшие квадратики, в которых можно установить или не установить пометку) и Radio Buttons
(небольшие кружочки, В ОДНОМ из которых стоит точка). Пользователь может установить курсор мыши
на кнопку, щелкнуть клавишей мыши - и кнопка пошлет диалоговому окну сообщение WM_COMMAND. То
же произойдет и в случае, если пользователь сначала выберет кнопку клавишей Tab, а потом нажмет
Enter.
<p>
В параметрах сообщения WM_COMMAND содержится информация, которой достаточно, чтобы диалоговое
окно узнало, от какой кнопки пришло сообщение, какое действие требуется выполнить, и таким
образом пользователь инициировал выдачу сообщения.
<p>
При этом необходимо отметить, что обычная кнопка (ее называют PushButton) не помнит того, что с
ней делали, т.е. она на короткое время становится нажатой, а затем возвращается в исходное
состояние. Можно нажать кнопку десять раз подряд, и все десять раз она пошлет диалоговому окну
одно и то же сообщение, если, конечно, кнопка не сделана запрещенной. CheckBox помнит о том, что
он находится в одном из двух состояний - установленом или не установленном, некоторые CheckBox'ы
могут находиться еще и в неопределенном состоянии.
<p>
Говорит о состоянии одной RadioButton бессмысленно. Дело в том, что RadioButton'ы предназначены
для осуществления выбора одного из нескольких взаимоисключаемых вариантов, поэтому можно говорить
о группе (иногда говорят кластере) RadioButton'ов. В частности, для объединения RadioButton'ов в
кластеры служит такой элемент управления, как группа (GroupBox). Обычно группы используются для
группирования органов управления только для улучшения дизайна диалоговых окон. Что же касается
RadioButton'ов, то без обрамляющей группы существование кластера не имеет смысла.
<p>
Формат описания кнопок в окне диалога достаточно прост:
<pre>
  CONTROL  "Заголовок", ButtonID, class, styles, X, Y, Width, Height
</pre>
X, Y, Width, Height - это все ясно. Все то же самое, что и при описании непосредственно
диалогового окна. "Заголовок" - надпись на кнопке или рядом с кнопкой. ButtonID - идентификатор
кнопки, т.е. значение, которое посылается диалоговому окну при нажатии кнопки в качестве
LOWORD(wParam). Через HIWORD(wParam) диалоговое окно получает код нотификации, т.е. код того
действия, которое произвел пользователь. Примерами действия пользователя могут служить нажатие
клавиши Enter, двойной щелчек правой или левой клавишей мыши и так далее. А источник, т.е. хэндл
инициировавшего сообщение окна, сообщения содержится в lParam (я напомню, что если сообщение
приходит от меню, то lParam всегда равен 0, а если от акселератора - 1). Все легко и просто.
Сложности начинаются при рассмотрении класса, определяющегося полем class, типа кнопки и стиля
кнопки, которые определяются параметром style.
<p>
Для кнопок, вне зависимости от того, PushButton ли это, RadioButton или CheckBox, класс всегда
определяется как "button".
<p>
Читатель, наверное, уже привык к тому, что ответы на большинство вопросов можно найти в файлах
заголовках и файлах помощи Win32. Поэтому и сейчас, как всегда, смотрим в заголовочный файл
winuser.h, выбираем оттуда стили кнопок, которые начинаются с букв BS_, и сводим их в таблицу.
Надоело изучать эти таблицы? Ничего, тяжело в учении - легко в бою! &copy; А.В. Суворов, "Наука
побеждать".
<p>

<center>
<h3>Стили кнопок</h3>
<table width=90% border=1><tr><td align=center width=20% bgcolor=#000050><b>Флаг</b></td>
<td align=center width=10% bgcolor=#000050><b>Значение</b></td>
<td align=center width=50% bgcolor=#000050><b>Эффект</b></td>
</tr><tr>
<td>BS_PUSHBUTTON</td>
<td align=center>0x00000000L</td>
<td>Создается обычная кнопка</td>
</tr><tr>

<td>BS_DEFPUSHBUTTON</td>
<td align=center>0x00000001L</td>
<td>Создается обычная кнопка, которая срабатывает при нажатии "Enter" даже тогда, когда не
выбрана</td>
</tr><tr>

<td>BS_CHECKBOX</td>
<td align=center>0x00000002L</td>
<td>Создается CheckBox, при нажатии состояние автоматически не изменяется, забота об этом
ложится на программу</td>
</tr><tr>

<td>BS_AUTOCHECKBOX</td>
<td align=center>0x00000003L</td>
<td>Создается CheckBox, который автоматически меняет свое состояние при нажатии</td>
</tr><tr>

<td>BS_RADIOBUTTON</td>
<td align=center>0x00000004L</td>
<td>Создается Radio Button, автоматически состояние не меняется</td>
</tr><tr>

<td>BS_3STATE</td>
<td align=center>0x00000005L</td>
<td>То же, что и BS_CHECKBOX, но имеет три состояния - включенное, отключенное и
неопределенное, автоматически состояние не меняет</td>
</tr><tr>

<td>BS_AUTO3STATE</td>
<td align=center>0x00000006L</td>
<td>То же, что и предыдущее, но состояние меняется автоматически</td>
</tr><tr>

<td>BS_GROUPBOX</td>
<td align=center>0x00000007L</td>
<td>Группа</td>
</tr><tr>

<td>BS_USERBUTTON</td>
<td align=center>0x00000008L</td>
<td>Устаревший стиль, необходимо использовать BS_OWNERDRAW</td>
</tr><tr>

<td>BS_AUTORADIOBUTTON</td>
<td align=center>0x00000009L</td>
<td>То же, что и RadioButton, но при нажатии состояние меняется автоматически</td>
</tr><tr>

<td>BS_OWNERDRAW</td>
<td align=center>0x0000000BL</td>
<td>За прорисовку кнопки отвечает программа, а не система</td>
</tr><tr>

<td>BS_LEFTTEXT</td>
<td align=center>0x00000020L</td>
<td>Текст помещается слева от RadioButton'а или CheckBox'а, то же, что и BS_RIGHTBUTTON</td>
</tr><tr>

<td>BS_TEXT</td>
<td align=center>0x00000000L</td>
<td>Внутри или рядом с кнопкой отображается текст</td>
</tr><tr>

<td>BS_ICON</td>
<td align=center>0x00000040L</td>
<td>Внутри кнопки или рядом с кнопкой отображается иконка</td>
</tr><tr>

<td>BS_BITMAP</td>
<td align=center>0x00000080L</td>
<td>Внутри кнопки или рядом с кнопкой отображается bitmap</td>
</tr><tr>

<td>BS_LEFT</td>
<td align=center>0x00000100L</td>
<td>Размещает текст у левого края прямоугольника, выделенного для размещения кнопки</td>
</tr><tr>

<td>BS_RIGHT</td>
<td align=center>0x00000200L</td>
<td>Размещает текст у правого края прямоугольника, выделенного для размещения кнопки</td>
</tr><tr>

<td>BS_CENTER</td>
<td align=center>0x00000300L</td>
<td>Размещает текст по горизонтали в центре прямоугольника, выделенного для размещения
кнопки</td>
</tr><tr>

<td>BS_TOP</td>
<td align=center>0x00000400L</td>
<td>Размещает текст у верхнего края прямоугольника, выделенного для размещения кнопки</td>
</tr><tr>

<td>BS_BOTTOM</td>
<td align=center>0x00000800L</td>
<td>Размещает текст у нижнего края прямоугольника, выделенного для размещения кнопки</td>
</tr><tr>

<td>BS_VCENTER</td>
<td align=center>0x00000C00L</td>
<td>Размещает текст по вертикали в центре прямоугольника, выделенного для размещения кнопки</td>
</tr><tr>

<td>BS_PUSHLIKE</td>
<td align=center>0x00001000L</td>
<td>Делает CheckBox или RadioButton внешне похожими на PushButton</td>
</tr><tr>

<td>BS_MULTILINE</td>
<td align=center>0x00002000L</td>
<td>При необходимости текст разбивается на несколько строк</td>
</tr><tr>

<td>BS_NOTIFY</td>
<td align=center>0x00003000L</td>
<td>Разрешает посылку родительскому окну нотификационных сообщений BN_DBLCLK, BN_KILLFOCUS и
BN_SETFOCUS</td>
</tr><tr>

<td>BS_FLAT</td>
<td align=center>0x00008000L</td>
<td>Не добавляется имитация трехмерности изображения элемента управления</td>
</tr><tr>

<td>BS_RIGHTBUTTON</td>
<td align=center>0x00000020L</td>
<td>RadioButton или CheckBox размещаются справа от надписи (то же, что и BS_LEFTTEXT)</td>
</tr></table>
<p><div align="center"><a href="res.html">	<img src="../../back.gif" width=66 height=29 border=0 alt=""></a></div></p>
</body>
</html>