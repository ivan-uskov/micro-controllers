<html>
<head>
<title>Контекст Устройства</title>
</head>
<BODY background="../../bgrwhite.gif">
<p><div align="center"><b><font size="+1" face="Arial">Контекст устройства </font></b></div></p>

<p>

С точки зрения программиста Windows является системой, не зависящей от устройств (device
independent). Эту независимость со стороны Windows обеспечивает библиотека GDI32.dll, а
со стороны устройства - драйвер этого устройства. С точки зрения программы связующим звеном
между программой и устройством является контекст устройства (Device Context - DC). Если
программе нужно осуществить обмен с внешним устройством, программа должна оповесить GDI о
необходимости подготовить устройство для операции ввода-вывода. После того, как устройство
подготовленно, программа получает хэндл контекста устройства, т.е. хэндл структуры,
содержащей набор характеристик этого устройства. В этот набор входят:<br>
&nbsp;bitmap(битовая карта, изображение), отображаемый в окне,<br>
&nbsp;перо для прорисовки линий,<br>
&nbsp;кисть,<br>
&nbsp;палитра,<br>
&nbsp;шрифт<br>
и т.д. Программа никогда напрямую не обращается к контексту устройства(кстати, эта структура
не документирована Microsoft), она обращается к нему опосредствованно, через определенные
функции. После того, как все действия произведены, и необходимость в использовании устройства
отпала, программа должна освободить контекст устройства, чтобы не занимать память. Есть еще
одна причина, из-за которой необходимо освобождать контекст устройства. В системе может
существовать одновременно только ограниченное число контекстов устройств. Если контекст
устройства не будет освобождаться после операций вывода, то через несколько перерисовок
окна система может повиснуть. Так что не забывайте освобождать контексты устройств!
<p>
Когда программа требует контекст устройства, она получает его уже заполненным значениями
по умолчанию. Объект в составе контекста называется текущим объектом. Само слово - текущий -
говорит о том, что контекст устройства можно изменить. Программа может создать новый объект,
скажем, bitmap или шрифт, и сделать его текущем. Замещенный объект автоматически из памяти
не удаляется, его необходимо позже удалить отдельно. Само собой разумеется, что программа
может получить характеристики текущего устройства. А вот изменить эти характеристики, увы,
можно только через замену объекта (впрочем, это и так понятно).


<p>
    <a href="3.html">Типы контекта устройства</a><br>
    <a href="17.html">Режим отображения</a><br>
    <a href="18.html">Пишем программу</a><br>
    <a href="19.html">Коды растровых операций</a><br>


<p><div align="center"><a href="index.htm">	<img src="../../soder.gif" width=120 height=31 border=0 alt=""></a></div></p>

</body>
</html>