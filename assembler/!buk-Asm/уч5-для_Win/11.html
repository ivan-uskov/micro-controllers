<html>
<head>
<title>Подключение Меню К Окну</title>
</head>
<BODY background="../../bgrwhite.gif">
<p><div align="center"><b><font size="+1" face="Arial">Подключение меню к окну </font></b></div></p>

<p>
Любой, кто хоть немного работал в Windows, знает, что меню располагаются сразу под заголовком
окна и позволяют пользователю осуществить выбор возможностей, предоставляемых программой.
Помимо этого, существуют также всплывающие меню, которые могут появлятся в любой точке экрана.
Обычно их содержание зависит от того, на каком окне щелкнули клавишей мыши.
<p>
Давайте представим себе главное меню программы как древовидную структуру. Основная часть -
корень нашего дерева - это непосредственно главное меню. Само по себе оно представляет только
структуру в памяти, не отображается на экране, не содержит ни одного элемента, но хранит
указатель на список структур, описывающих подключаемые к нему элементы и всплывающие (popup)
меню. В свою очередь, popup-меню должно указать на список структур очередного, более низкого
уровня и т.д. Конечные элементы меню никаких указателей на списки не имеют, но хранят некий
идентификатор действия (назовем его идентификатором элемента меню), которое должна произвести
программа при выборе данного элемента меню. Используя эти структуры, мы можем построить меню
практически любой глубины и сложности.
<p>
Эта многоуровневая древовидная структура описывается в файле ресурсов. Описание меню имеет вид:
<pre>
MenuName  MENU  [параметры] ; это - главное меню
{
  Описание всех popup-меню и элементов меню второго уровня
}
</pre>
В данном случае MenuName - это имя создаваемого нами меню. Слово MENU обозначает начало
определения меню.
<p>
В Win32 API для описания меню существуют два ключевых слова. Первое - POPUP - специфицирует
всплывающее меню. Второе - MENUITEM - описывает обычный элемент меню.
<p>
Всплывающие меню описывается следующим образом:
<pre>
POPUP  "Имя"  [,параметры]  ; описание popup-меню
{
  Описание всех popup-меню и элементов очередного уровня
}
</pre>
У конечного элемента меню в его описании есть еще одна характеристика - тот самый
идентификатор действия:
<pre>
MENUITEM  "Имя",  MenuID  [,параметры]
</pre>
В обоих случаях "Имя" - это тот текст, который будет выведен на экран при отображении меню
(обратите внимание - при описании главного меню выводимого на экран текста нет!). В том
случае, когда вместо имени окна записано слово SEPARATOP (без кавычек!), на месте элемента
меню появляется горизонтальная линия. Обычно эти горизонтальные линии (сепораторы или
разделители) используются для разделения элементов подменю на логические группы (логика
определяется только программистом и никаких особенностей не содержит).
<p>
Если в имени меню встречается символ "&", то следующий за амперсандом символ на экране
будет подчеркнут одинарной чертой. Этот элемент меню можно будет вызывать с клавиатуры
посредством одновременного нажатия клавиши Alt и подчеркнутого символа.
<p>
MenuID - идентификатор действия. Он может быть передан функции окна, содержащего меню. Значение
идентификатора определяется пользователем. Функция окна в зависимости от полученного MenuID
производит определенные действия.
<p>
Параметры же описывают способ появления элемента на экране. Возможные значения параметров
приведены в таблице:
<center>
<h3>Параметры, описывающие элемент меню в файле ресурсов</h3>
<table width=90% border=1><tr><td width=30% bgcolor=#000050><b>Флаг</b></td>
<td width=60% bgcolor=#000050><b>Значение</b></td></tr>
<tr><td>CHECKED</td><td>Рядом с именем элемента может отображаться небольшой значек, говорящий
о том, что соответствующий флаг установлен</td></tr>
<tr><td>ENABLED</td><td>Элемент меню доступен</td></tr>
<tr><td>DISABLED</td><td>Элемент меню недоступен, но отображается как обычный</td></tr>
<tr><td>GRAYED</td><td>Элемент меню недоступен и отображается серым цветом</td></tr>
<tr><td>MENUBREAK</td><td>Горизонтальные меню размещают следующие элементы в новой строке,
а вертикальные - в новом столбце</td></tr>
<tr><td>MENUBARBREAK</td><td>То же, что и предыдущее, но в случае вертикального меню столбцы
разделяются вертикальной линией</td></tr>
</table>
</center>
<p>
Попробуем создать описание небольшого меню. Горизонтальное меню (menubar) позволит выбирать
подменю "File", "Examples" и конечный элемент "Help". Подменю "File" будет содержать
элементы "Open" и "Exit", разделенные горизонтальной линией, а подменю "Examples" - несколько
конечных элементов.
<p>
Ниже приведен текст скрипта для этого меню:
<pre>
  MyMenu MENU
   {
     POPUP "&File"
      {
        MENUITEM "&Open", 101
        MENUITEM SEPARATOR
        MENUITEM "E&xit", 102
      }
     POPUP "&Examples"
      {
        POPUP "Example 1"
         {
           MENUITEM "1&1", 103
           MENUITEM "1&2", 104
         }
        POPUP "Example 2"
         {
           MENUITEM "2&1", 105
           MENUITEM "2&2", 106
         }
      }
     MENUITEM "&Help", 111
   }
</pre>
Следует обратить внимание на то, что идентификаторы действия есть только у MENUITEM'ов.
Popup-меню идентификаторов не содержит.
<p><div align="center"><a href="res.html">	<img src="../../back.gif" width=66 height=29 border=0 alt=""></a></div></p>
<p>
</body>
</html>